{% load static %}

<header class="sticky top-0 z-40 w-full bg-white border-b border-slate-200">
  <div class="max-w-6xl mx-auto px-4 h-14 flex justify-between items-center">

    <a href="/" class="text-lg font-semibold tracking-tight whitespace-nowrap">
      Safwan Restaurant
    </a>

    <nav class="hidden md:flex items-center gap-6 text-sm">
      <a href="/" class="hover:text-amber-600">Home</a>
      <a href="{% url 'menu' %}" class="hover:text-amber-600">Menu</a>
      <a href="{% url 'book' %}" class="hover:text-amber-600">Book Table</a>
      <a href="{% url 'ordersPage' %}" class="hover:text-amber-600">Orders</a>

      <button
        onclick="openCart()"
        class="relative p-2 rounded-lg hover:bg-slate-100 transition"
        aria-label="Open cart"
      >
        <img
          src="{% static 'img/shopping-cart.png' %}"
          alt="Shopping Cart"
          class="w-6 h-6"
        />
        <span
          data-cart-count
          class="absolute -top-1 -right-1 bg-orange-600 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full hidden"
        >
          0
        </span>
      </button>

      {% if user.is_authenticated %}
        <span class="text-slate-700 font-medium">
          {{ user.username }}
        </span>

        <a
          href="{% url 'logout' %}"
          class="px-4 py-2 border rounded-lg hover:bg-slate-100 transition"
        >
          Logout
        </a>
      {% else %}
        <button
          onclick="openAuthModal('login')"
          class="px-4 py-2 border rounded-lg hover:bg-slate-100 transition"
        >
          Login
        </button>

        <button
          onclick="openAuthModal('signup')"
          class="px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition"
        >
          Sign Up
        </button>
      {% endif %}
    </nav>

    <div class="md:hidden flex items-center gap-2">
      <button
        onclick="openCartFromMobile()"
        class="relative p-2 rounded-lg hover:bg-slate-100 transition"
      >
        <img
          src="{% static 'img/shopping-cart.png' %}"
          class="w-6 h-6"
        />
        <span
          data-cart-count
          class="absolute -top-1 -right-1 bg-orange-600 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full hidden"
        >
          0
        </span>
      </button>

      <button
        onclick="toggleMobileMenu()"
        class="rounded-lg p-2 hover:bg-slate-100 transition"
      >
        â˜°
      </button>
    </div>
  </div>

  <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200 bg-white">
    <nav class="px-4 py-4 space-y-3 text-sm">
      <a href="/" class="block">Home</a>
      <a href="{% url 'menu' %}" class="block">Menu</a>
      <a href="{% url 'book' %}" class="block">Book Table</a>
      <a href="{% url 'ordersPage' %}" class="block">Orders</a>

      {% if user.is_authenticated %}
        <span class="block pt-3 font-medium">
          {{ user.username }}
        </span>

        <a
          href="{% url 'logout' %}"
          class="block px-4 py-2 border rounded-lg"
        >
          Logout
        </a>
      {% else %}
        <button
          onclick="openAuthModal('login')"
          class="w-full px-4 py-2 border rounded-lg"
        >
          Login
        </button>

        <button
          onclick="openAuthModal('signup')"
          class="w-full px-4 py-2 bg-amber-500 text-white rounded-lg"
        >
          Sign Up
        </button>
      {% endif %}
    </nav>
  </div>
</header>

<script>
  let mobileMenuOpen = false;

  function toggleMobileMenu() {
    mobileMenuOpen = !mobileMenuOpen;
    document.getElementById("mobileMenu")
      .classList.toggle("hidden", !mobileMenuOpen);
  }
</script>
